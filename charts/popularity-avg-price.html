<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Popularity from the average menu price of the restaurant</title>
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
<body>
    <div id="chart" style="width:100%;height:75vh;"></div>
    <script>
        async function createChart() {
            var response = await fetch('http://localhost:8888/ratio/popularity/', {
                method: 'GET',
                headers: {
                    'Content-Type': 'application/json',
                    'Accept': 'application/json',
                },
            })
        }
        var json = await response.json();
        var table = json.data;

        var xArray = [50,60,70,80,90,100,110,120,130,140,150];
        var yArray = [7,8,8,9,9,9,10,11,14,14,15];

        var data = table.map(r => {
            return {
                // x: r.map(row => row.average_price),
                // y: r.map(row => row.popularity),
                x: xArray,
                y: yArray,
                mode: "markers",
                // name: r.restaurant_name
            }
        })

        var layout = {
            title: 'Average Monthly Rainfalls for All Basins',
            xaxis: {range: [40, 160], title: "Square Meters"},
            yaxis: {range: [5, 16], title: "Price in Millions"},
        };
        
        var config = { responsive: true,};
        Plotly.newPlot("myPlot", data, layout, config);
    </script>
</body>
</html>